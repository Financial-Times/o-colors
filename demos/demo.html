<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Test for colours module</title>
      <meta name="viewport" content="width=device-width">
      <style>
        .swatch {
          width: 50px;
          height: 50px;
          border: 2px solid transparent;
          color: transparent;
          font-size: 40px;
          text-align: center;
          font-style: italic;
          float: left;
          margin-right: 10px;
        }
        .testcolour {
          background-color: green;
        }
        .testcolour2 {
          color: red;
        }
      </style>
      <link rel="stylesheet" type='text/css' href="http://10.112.58.98/bundles/css?modules=o-colors@2">
      <link rel="stylesheet" type='text/css' href="http://10.112.58.98/bundles/css?modules=o-techdocs">
  </head>
  <body class='o-techdocs'>

    <h1>Palette</h1>

    <div class="o-grid-row palette-results">
    </div>

    <h1>Use cases</h1>

    <div class="o-grid-row use-cases-results">
    </div>

    <script>
    var palette = {};
    ['palette', 'use-cases'].forEach(function(type) {
      var oReq = new XMLHttpRequest();
      var el = document.querySelector('.'+type+'-results');
      oReq.open("GET", "../src/scss/"+type+".scss", true);
      oReq.onload = function() {
        var src = this.responseText;
        var m = src.match(/\$[\w\-]+\:\s*\n([^;]+);/);
        m[1].split(',').forEach(function(rule) {
          var m = rule.replace(/\/*[\s\S]*?\*\//g, '').match(/\s*([\w\-]+)\s+([\w\-\#]+)(?:\s+([\w\-]+))?/);
          if (type=='palette') {
            palette[m[1]] = m[2];
            el.innerHTML += '<div class="o-grid-col|4|m6|s12|"><div class="swatch .o-colors-palette-'+m[1]+'">A</div><h2>'+m[1]+'</h2><p>'+m[2]+'</p></div>';
          } else {
            el.innerHTML += '<div class="o-grid-col|4|m6|s12|"><div class="swatch .o-colors-'+m[1]+'-'+m[3]+'">A</div><h2>'+m[1]+'</h2><p>'+m[2]+' ('+palette[m[2]]+')</p></div>';
          }
        });
      };
      oReq.send();
    });
    </script>
  </body>
</html>
